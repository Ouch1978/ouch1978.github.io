window.RevealAudioSlideshow=window.RevealAudioSlideshow||{id:"RevealAudioSlideshow",init:function(e){initAudioSlideshow(e)}};const initAudioSlideshow=function(e){var t,n="audio/",a=".ogg",i=null,r=!1,d=!1,u=5,o=!0,l=0,s=!1,c=.05,h=!1,m="position: fixed; bottom: 4px; left: 25%; width: 50%; height:75px; z-index: 33;",f=null,v=null;function p(t){f&&(f.pause(),f.style.display="none");var n=e.getIndices(),a="audioplayer-"+n.h+"."+n.v;null!=n.f&&n.f>=0&&(a=a+"."+n.f),(f=document.getElementById(a))&&(f.style.display="block",t?f.id!=t.id&&(f.volume=t.volume,f.muted=t.muted,f.play()):s&&f.play())}function y(e){for(var t=e.querySelectorAll("[data-audio-text]"),n=0,a=t.length;n<a;n++)e.innerHTML=e.innerHTML.replace(t[n].outerHTML,t[n].getAttribute("data-audio-text"));return e.textContent.trim().replace(/\s+/g," ")}function g(t,n,a,i){var u=document.createElement("div"),o=null;if(!i.hasAttribute("data-audio-src"))if(i.hasAttribute("data-audio-text"))o=i.getAttribute("data-audio-text");else if(r&&e.getSlideNotes(i)){var l=document.createElement("div");l.innerHTML=e.getSlideNotes(i),o=l.textContent||""}else if(d){u.innerHTML=i.innerHTML;for(var s=0,c=(h=u.querySelectorAll(".fragment")).length;s<c;s++)u.innerHTML=u.innerHTML.replace(h[s].outerHTML,"");o=y(u)}E(t,n+"."+a,i.getAttribute("data-audio-src"),o,i.querySelector(":not(.fragment) > video[data-audio-controls]"));for(var h,m=0;(h=i.querySelectorAll('.fragment[data-fragment-index="'+m+'"]')).length>0;){var f=null,v=null;for(o="",s=0,c=h.length;s<c;s++)f||(f=h[s].getAttribute("data-audio-src")),v||(v=h[s].querySelector("video[data-audio-controls]")),h[s].hasAttribute("data-audio-text")?o+=h[s].getAttribute("data-audio-text")+" ":d&&(u.innerHTML=h[s].textContent,o+=y(u));E(t,n+"."+a+"."+m,f,o,v),m++}}function b(e,t){e.addEventListener("playing",(function(n){t.currentTime=e.currentTime})),e.addEventListener("play",(function(n){t.currentTime=e.currentTime,t.paused&&t.play()})),e.addEventListener("pause",(function(n){t.currentTime=e.currentTime,t.paused||t.pause()})),e.addEventListener("volumechange",(function(n){t.volume=e.volume,t.muted=e.muted})),e.addEventListener("seeked",(function(n){t.currentTime=e.currentTime}));var n=e.querySelector("source[data-audio-silent]");n&&e.removeChild(n),n=document.createElement("source");var a=new SilentAudio(Math.round(t.duration+.5));n.src=a.dataURI,n.setAttribute("data-audio-silent",t.duration),e.appendChild(n,e.firstChild)}function S(e,n,a){var r;null!=i&&null!=n&&""!=n?((r=document.createElement("source")).src=i+encodeURIComponent(n),r.setAttribute("data-tts",e.id.split("-").pop()),e.appendChild(r,e.firstChild)):e.querySelector("source[data-audio-silent]")||((r=document.createElement("source")).src=t.dataURI,r.setAttribute("data-audio-silent",u),e.appendChild(r,e.firstChild))}function E(t,i,r,d,s){var c=document.createElement("audio");if(c.setAttribute("style","position: relative; top: 20px; left: 10%; width: 80%;"),c.id="audioplayer-"+i,c.style.display="none",c.setAttribute("controls",""),c.setAttribute("preload","none"),s&&(s.duration?b(c,s):s.addEventListener("loadedmetadata",(e=>{b(c,s)}))),c.addEventListener("ended",(function(t){if("undefined"==typeof Recorder||!Recorder.isRecording){var n=l,a=e.getCurrentSlide(),i=e.getIndices();if(void 0!==i.f&&i.f>=0){var r=a.querySelector('.fragment[data-fragment-index="'+i.f+'"][data-audio-advance]');r&&(n=r.getAttribute("data-audio-advance"))}else a.hasAttribute("data-audio-advance")&&(n=a.getAttribute("data-audio-advance"));if("true"==l||0==n){var d=f;e.next(),p(d)}else n>0&&(v=setTimeout((function(){var t=f;e.next(),p(t),v=null}),n))}})),c.addEventListener("play",(function(t){var n=new CustomEvent("startplayback");n.timestamp=1e3*c.currentTime,document.dispatchEvent(n),v&&(clearTimeout(v),v=null);var a=e.getIndices(),i="audioplayer-"+a.h+"."+a.v;null!=a.f&&a.f>=0?i=i+"."+(a.f+1):i+=".0";var r=document.getElementById(i);r||(i="audioplayer-"+a.h+"."+(a.v+1),(r=document.getElementById(i))||(i="audioplayer-"+(a.h+1)+".0",r=document.getElementById(i))),r&&r.load()})),c.addEventListener("pause",(function(e){v&&(clearTimeout(v),v=null),document.dispatchEvent(new CustomEvent("stopplayback"))})),c.addEventListener("seeked",(function(e){var t=new CustomEvent("seekplayback");t.timestamp=1e3*c.currentTime,document.dispatchEvent(t),v&&(clearTimeout(v),v=null)})),null!=r)r.split(",").forEach((function(e){var t=document.createElement("source");t.src=e,c.insertBefore(t,c.firstChild)}));else if(o){try{var h=new XMLHttpRequest;h.open("HEAD",n+i+a,!0),h.onload=function(){if(4===h.readyState&&h.status>=200&&h.status<300){var e=document.createElement("source");e.src=n+i+a,c.insertBefore(e,c.firstChild),!0}else S(c,d)},h.send(null)}catch(y){var m=document.createElement("source");m.src=n+i+a,c.insertBefore(m,c.firstChild),S(c,d)}}(null!=r||u>0)&&t.appendChild(c)}e.addEventListener("fragmentshown",(function(e){v&&(clearTimeout(v),v=null),p()})),e.addEventListener("fragmenthidden",(function(e){v&&(clearTimeout(v),v=null),p()})),e.addEventListener("ready",(function(f){!function(){var f=e.getConfig().audio;f&&(null!=f.prefix&&(n=f.prefix),null!=f.suffix&&(a=f.suffix),null!=f.textToSpeechURL&&(i=f.textToSpeechURL),null!=f.defaultNotes&&(r=f.defaultNotes),null!=f.defaultText&&(d=f.defaultText),null!=f.defaultDuration&&(u=f.defaultDuration),null!=f.defaultAudios&&(o=f.defaultAudios),null!=f.advance&&(l=f.advance),null!=f.autoplay&&(s=f.autoplay),null!=f.playerOpacity&&(c=f.playerOpacity),null!=f.playerStyle&&(m=f.playerStyle));("ontouchstart"in window||navigator.msMaxTouchPoints)&&(opacity=1);e.getConfig().audioStartAtFragment&&(h=e.getConfig().audioStartAtFragment);var v=".audio-controls>audio { opacity:"+c+";} .audio-controls:hover>audio { opacity:1;}";style=document.createElement("style"),style.styleSheet?style.styleSheet.cssText=v:style.appendChild(document.createTextNode(v));document.getElementsByTagName("head")[0].appendChild(style),t=new SilentAudio(u);var p=document.createElement("div");p.className="audio-controls",p.setAttribute("style",m),document.querySelector(".reveal").appendChild(p),function(){for(var e=document.querySelectorAll("video[data-audio-controls]"),t=0;t<e.length;t++)e[t].load()}();for(var y=document.querySelectorAll(".reveal .slides>section"),b=0,S=y.length;b<S;b++){var E=y[b].querySelectorAll("section");if(E.length)for(var A=0,T=E.length;A<T;A++)g(p,b,A,E[A]);else g(p,b,0,y[b])}}(),p(),document.dispatchEvent(new CustomEvent("stopplayback"))})),e.addEventListener("slidechanged",(function(t){v&&(clearTimeout(v),v=null);var n=e.getIndices();!h&&void 0!==n.f&&n.f>=0&&e.slide(n.h,n.v,-1),p()})),e.addEventListener("paused",(function(e){v&&(clearTimeout(v),v=null),f&&f.pause()})),e.addEventListener("resumed",(function(e){v&&(clearTimeout(v),v=null)})),e.addEventListener("overviewshown",(function(e){v&&(clearTimeout(v),v=null),f&&f.pause(),document.querySelector(".audio-controls").style.visibility="hidden"})),e.addEventListener("overviewhidden",(function(e){v&&(clearTimeout(v),v=null),document.querySelector(".audio-controls").style.visibility="visible"})),e.addKeyBinding({keyCode:65,key:"A",description:"Toggle audio"},(function(){f&&(v&&(clearTimeout(v),v=null),f.paused?f.play():f.pause())}))};var FastBase64={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var e=0;4096>e;e++)this.encLookup[e]=this.chars[e>>6]+this.chars[63&e]},Encode:function(e){for(var t=e.length,a="",i=0;t>2;)n=e[i]<<16|e[i+1]<<8|e[i+2],a+=this.encLookup[n>>12]+this.encLookup[4095&n],t-=3,i+=3;if(t>0){var r=(252&e[i])>>2,d=(3&e[i])<<4;if(t>1&&(d|=(240&e[++i])>>4),a+=this.chars[r],a+=this.chars[d],2==t){var u=(15&e[i++])<<2;u|=(192&e[i])>>6,a+=this.chars[u]}1==t&&(a+="="),a+="="}return a}};FastBase64.Init();var SilentAudio=function(e){function t(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function n(e){return[255&e,e>>8&255]}this.data=[],this.wav=[],this.dataURI="",this.header={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8e3,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0},this.Make=function(e){for(var a=0;a<e*this.header.sampleRate;a++)this.data[a]=127;this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>3,this.header.byteRate=this.header.blockAlign*this.sampleRate,this.header.subChunk2Size=this.data.length*(this.header.bitsPerSample>>3),this.header.chunkSize=36+this.header.subChunk2Size,this.wav=this.header.chunkId.concat(t(this.header.chunkSize),this.header.format,this.header.subChunk1Id,t(this.header.subChunk1Size),n(this.header.audioFormat),n(this.header.numChannels),t(this.header.sampleRate),t(this.header.byteRate),n(this.header.blockAlign),n(this.header.bitsPerSample),this.header.subChunk2Id,t(this.header.subChunk2Size),16==this.header.bitsPerSample?function(e){for(var t=[],n=0,a=e.length,i=0;a>i;i++)t[n++]=255&e[i],t[n++]=e[i]>>8&255;return t}(this.data):this.data),this.dataURI="data:audio/wav;base64,"+FastBase64.Encode(this.wav)},this.Make(e)};