window.RevealQnA=window.RevealQnA||{id:"RevealQnA",init:function(e){initQnA(e)},toggleQnA:function(){toggleQnA()}};const initQnA=function(e){var t=e.getConfig().questions;const n=3;var s=0,i=0,o=document.createElement("div");o.classList.add("qna"),o.classList.add("dashboard"),o.classList.add("overlay"),o.style.visibility="hidden",o.setAttribute("data-prevent-swipe",""),o.oncontextmenu=function(){return!1},o.style.zIndex=26,o.innerHTML="<h1> Q&A </h1>";var a=document.createElement("div");a.classList.add("qna"),a.classList.add("question"),a.innerHTML='<div class="user">Anonymous</div><div class="text">Text</div><div class="votes"><span>-1</span> <i class="fa fa-thumbs-up"></i></div><div class="close"><i class="fa fa-check"></i></div>',o.innerHTML='<div class="qna ask"><input type="text" placeholder="Enter question" required="" autocomplete="off"></input><button>Ask <i class="fa fa-paper-plane"></button></div>',o.querySelector("input").addEventListener("keypress",(function(e){e.stopPropagation(),13===e.which&&this.nextSibling.click()})),o.querySelector("button").addEventListener("click",(function(){var e,t,n=this.parentElement.firstChild;n.value&&(e=n.value,(t=new CustomEvent("send")).content={sender:"questions-plugin",recipient:!0,type:"ask",text:e,username:"Anonymous"},document.dispatchEvent(t),n.value="")}));var l=document.createElement("div");if(l.classList.add("qna"),l.classList.add("questions"),o.appendChild(l),document.querySelector(".reveal").appendChild(o),toggleQnAButton=t.toggleQnAButton||!0,toggleQnAButton){var u=document.createElement("div");u.className="toggle-questions",u.id="toggle-questions",u.style.visibility="hidden",u.style.position="absolute",u.style.zIndex=30,u.style.fontSize="24px",u.style.left=toggleQnAButton.left||"30px",u.style.bottom=toggleQnAButton.bottom||"30px",u.style.top=toggleQnAButton.top||"auto",u.style.right=toggleQnAButton.right||"auto",u.innerHTML='<a href="#" title="Toggle Q&A dashboard (Q)" onclick="RevealQnA.toggleQnA(); return false;"><span class="fa-stack" style="margin: -10px;"><span class="fa fa-comment fa-stack-1x"></span><strong class="fa-stack-1x fa-inverse qna question-counter" style="font-size:0.5em;"></strong></span></a>',document.querySelector(".reveal").appendChild(u)}function c(e){e||(e="hidden"==document.querySelector(".qna.dashboard").style.visibility?"visible":"hidden"),document.querySelector(".qna.dashboard").style.visibility=e}function r(e){return document.querySelector(`.qna.question[data-id="${e}"]`)}function d(e){for(;e.previousSibling&&(e.question.votes>e.previousSibling.question.votes||e.question.open>e.previousSibling.question.open);)e=e.parentElement.insertBefore(e,e.previousSibling);return e}function v(e){var t=a.cloneNode(!0);if(t.dataset.id=e.id,t.querySelector(".user").innerHTML=e.username,t.querySelector(".votes > span").innerHTML=e.votes,t.querySelector(".text").innerHTML=e.text,t.querySelector(".votes").addEventListener("click",(function(e){var t,n;this.classList.contains("disabled")||this.parentElement.classList.contains("closed")||(this.classList.add("disabled"),t=this.parentElement,(n=new CustomEvent("send")).content={sender:"questions-plugin",recipient:!0,type:"upvote",id:t.question.id},document.dispatchEvent(n))})),RevealSeminar.hosting()&&e.open?t.querySelector(".close").addEventListener("click",(function(e){this.parentElement.classList.contains("closed")||function(e){var t=Object.assign({},e.question);t.open=!1;var n=new CustomEvent("broadcast");n.content={sender:"questions-plugin",copy:!0,question:t},document.dispatchEvent(n)}(this.parentElement)})):t.querySelector(".close").style.visibility="hidden",t.question=e,e.open){i++;for(var n=document.querySelectorAll(".qna.question-counter"),s=0;s<n.length;s++)n[s].innerHTML=i}else t.classList.add("closed");return d(document.querySelector(".qna > .questions").appendChild(t))}return document.addEventListener("seminar",(function(t){for(var s=t.status>=n?"visible":"hidden",i=document.querySelectorAll(".toggle-questions"),o=0;o<i.length;o++)i[o].style.visibility=s;"hidden"==s?(c(s),e.removeKeyBinding(81)):e.addKeyBinding({keyCode:81,key:"Q",description:"Toggle Q&A"},(()=>{c()}))})),document.addEventListener("received",(function(e){if(e.content&&"questions-plugin"==e.content.sender)switch(e.content.type){case"ask":s++,(t=new CustomEvent("broadcast")).content={sender:"questions-plugin",copy:!0,question:{id:s,username:e.content.username,text:e.content.text,votes:0,open:!0}},document.dispatchEvent(t);break;case"upvote":var t,n=r(e.content.id),o=Object.assign({},n.question);o.votes++,(t=new CustomEvent("broadcast")).content={sender:"questions-plugin",copy:!0,question:o},document.dispatchEvent(t);break;default:if(!(n=r(e.content.question.id))){v(e.content.question);break}if(n.question.open&&!e.content.question.open){i--;for(var a=document.querySelectorAll(".qna.question-counter"),l=0;l<a.length;l++)a[l].innerHTML=0==i?"":i;n.classList.add("closed"),n.question=e.content.question,function(e){for(;e.nextSibling&&(e.nextSibling.question.open>e.question.open||e.nextSibling.question.votes>e.question.votes);)e=e.parentElement.insertBefore(e,e.nextSibling.nextSibling)}(n)}else if(n.question.votes<e.content.question.votes){var u=n.querySelector(".votes > span");u&&(u.innerHTML=e.content.question.votes),n.question=e.content.question,d(n)}}})),this.toggleQnA=c,this};