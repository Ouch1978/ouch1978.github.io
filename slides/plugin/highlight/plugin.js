/*! For license information please see plugin.js.LICENSE.txt */
import hljs from"highlight.js";!function(e,t){"use strict";var n,i="hljs-ln",r="hljs-ln-line",l="hljs-ln-code",o="hljs-ln-numbers",a="hljs-ln-n",s="data-line-number",u=/\r\n|\r|\n/g;function c(n){try{var i=t.querySelectorAll("code.hljs,code.nohighlight");for(var r in i)i.hasOwnProperty(r)&&(i[r].classList.contains("nohljsln")||h(i[r],n))}catch(n){e.console.error("LineNumbers error: ",n)}}function h(e,t){"object"==typeof e&&(e.innerHTML=g(e,t))}function g(e,t){var n,c,h=(n=e,{singleLine:function(e){return!!e.singleLine&&e.singleLine}(c=(c=t)||{}),startFrom:function(e,t){var n=1;isFinite(t.startFrom)&&(n=t.startFrom);var i=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):null}(e,"data-ln-start-from");return null!==i&&(n=function(e){if(!e)return 1;var t=Number(e);return isFinite(t)?t:1}(i)),n}(n,c)});return function e(t){var n=t.childNodes;for(var i in n){var r;n.hasOwnProperty(i)&&(0<((r=n[i]).textContent.trim().match(u)||[]).length&&(0<r.childNodes.length?e(r):d(r.parentNode)))}}(e),function(e,t){var n=f(e);if(""===n[n.length-1].trim()&&n.pop(),1<n.length||t.singleLine){for(var u="",c=0,h=n.length;c<h;c++)u+=p('<tr><td class="{0} {1}" {3}="{5}"><div class="{2}" {3}="{5}"></div></td><td class="{0} {4}" {3}="{5}">{6}</td></tr>',[r,o,a,s,l,c+t.startFrom,0<n[c].length?n[c]:" "]);return p('<table class="{0}">{1}</table>',[i,u])}return e}(e.innerHTML,h)}function d(e){var t=e.className;if(/hljs-/.test(t)){for(var n=f(e.innerHTML),i=0,r="";i<n.length;i++)r+=p('<span class="{0}">{1}</span>\n',[t,0<n[i].length?n[i]:" "]);e.innerHTML=r.trim()}}function f(e){return 0===e.length?[]:e.split(u)}function p(e,t){return e.replace(/\{(\d+)\}/g,(function(e,n){return void 0!==t[n]?t[n]:e}))}hljs?(hljs.initLineNumbersOnLoad=function(n){"interactive"===t.readyState||"complete"===t.readyState?c(n):e.addEventListener("DOMContentLoaded",(function(){c(n)}))},hljs.lineNumbersBlock=h,hljs.lineNumbersValue=function(e,t){if("string"==typeof e){var n=document.createElement("code");return n.innerHTML=e,g(n,t)}},(n=t.createElement("style")).type="text/css",n.innerHTML=p(".{0}{border-collapse:collapse}.{0} td{padding:0}.{1}:before{content:attr({2})}",[i,a,s]),t.getElementsByTagName("head")[0].appendChild(n)):e.console.error("highlight.js not detected!"),document.addEventListener("copy",(function(e){var t,n=window.getSelection();!function(e){for(var t=e;t;){if(t.className&&-1!==t.className.indexOf("hljs-ln-code"))return 1;t=t.parentNode}}(n.anchorNode)||(t=-1!==window.navigator.userAgent.indexOf("Edge")?function(e){for(var t=e.toString(),n=e.anchorNode;"TD"!==n.nodeName;)n=n.parentNode;for(var i=e.focusNode;"TD"!==i.nodeName;)i=i.parentNode;var r=parseInt(n.dataset.lineNumber),o=parseInt(i.dataset.lineNumber);if(r==o)return t;var a,u=n.textContent,c=i.textContent;for(o<r&&(a=r,r=o,o=a,a=u,u=c,c=a);0!==t.indexOf(u);)u=u.slice(1);for(;-1===t.lastIndexOf(c);)c=c.slice(0,-1);for(var h=u,g=function(e){for(var t=e;"TABLE"!==t.nodeName;)t=t.parentNode;return t}(n),d=r+1;d<o;++d){var f=p('.{0}[{1}="{2}"]',[l,s,d]);h+="\n"+g.querySelector(f).textContent}return h+"\n"+c}(n):n.toString(),e.clipboardData.setData("text/plain",t),e.preventDefault())}))}(window,document);const Plugin={id:"highlight",HIGHLIGHT_STEP_DELIMITER:"|",HIGHLIGHT_LINE_DELIMITER:",",HIGHLIGHT_LINE_RANGE_DELIMITER:"-",hljs:hljs,init:function(e){let t=e.getConfig().highlight||{};t.highlightOnLoad="boolean"!=typeof t.highlightOnLoad||t.highlightOnLoad,t.escapeHTML="boolean"!=typeof t.escapeHTML||t.escapeHTML,Array.from(e.getRevealElement().querySelectorAll("pre code")).forEach((e=>{e.parentNode.classList.add("code-wrapper");let n=e.querySelector('script[type="text/template"]');n&&(e.textContent=n.innerHTML),e.hasAttribute("data-trim")&&"function"==typeof e.innerHTML.trim&&(e.innerHTML=betterTrim(e)),t.escapeHTML&&!e.hasAttribute("data-noescape")&&(e.innerHTML=e.innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;")),e.addEventListener("focusout",(function(e){hljs.highlightElement(e.currentTarget)}),!1)})),"function"==typeof t.beforeHighlight&&t.beforeHighlight(hljs),t.highlightOnLoad&&Array.from(e.getRevealElement().querySelectorAll("pre code")).forEach((e=>{Plugin.highlightBlock(e)})),e.on("pdf-ready",(function(){[].slice.call(e.getRevealElement().querySelectorAll("pre code[data-line-numbers].current-fragment")).forEach((function(e){Plugin.scrollHighlightedLineIntoView(e,{},!0)}))}))},highlightBlock:function(e){if(hljs.highlightElement(e),0!==e.innerHTML.trim().length&&e.hasAttribute("data-line-numbers")){hljs.lineNumbersBlock(e,{singleLine:!0});var t={currentBlock:e},n=Plugin.deserializeHighlightSteps(e.getAttribute("data-line-numbers"));if(n.length>1){var i=parseInt(e.getAttribute("data-fragment-index"),10);("number"!=typeof i||isNaN(i))&&(i=null),n.slice(1).forEach((function(n){var r=e.cloneNode(!0);r.setAttribute("data-line-numbers",Plugin.serializeHighlightSteps([n])),r.classList.add("fragment"),e.parentNode.appendChild(r),Plugin.highlightLines(r),"number"==typeof i?(r.setAttribute("data-fragment-index",i),i+=1):r.removeAttribute("data-fragment-index"),r.addEventListener("visible",Plugin.scrollHighlightedLineIntoView.bind(Plugin,r,t)),r.addEventListener("hidden",Plugin.scrollHighlightedLineIntoView.bind(Plugin,r.previousSibling,t))})),e.removeAttribute("data-fragment-index"),e.setAttribute("data-line-numbers",Plugin.serializeHighlightSteps([n[0]]))}var r="function"==typeof e.closest?e.closest("section:not(.stack)"):null;if(r){var l=function(){Plugin.scrollHighlightedLineIntoView(e,t,!0),r.removeEventListener("visible",l)};r.addEventListener("visible",l)}Plugin.highlightLines(e)}},scrollHighlightedLineIntoView:function(e,t,n){cancelAnimationFrame(t.animationFrameID),t.currentBlock&&(e.scrollTop=t.currentBlock.scrollTop),t.currentBlock=e;var i=this.getHighlightedLineBounds(e),r=e.offsetHeight,l=getComputedStyle(e);r-=parseInt(l.paddingTop)+parseInt(l.paddingBottom);var o=e.scrollTop,a=i.top+(Math.min(i.bottom-i.top,r)-r)/2,s=e.querySelector(".hljs-ln");if(s&&(a+=s.offsetTop-parseInt(l.paddingTop)),a=Math.max(Math.min(a,e.scrollHeight-r),0),!0===n||o===a)e.scrollTop=a;else{if(e.scrollHeight<=r)return;var u=0,c=function(){u=Math.min(u+.02,1),e.scrollTop=o+(a-o)*Plugin.easeInOutQuart(u),u<1&&(t.animationFrameID=requestAnimationFrame(c))};c()}},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},getHighlightedLineBounds:function(e){var t=e.querySelectorAll(".highlight-line");if(0===t.length)return{top:0,bottom:0};var n=t[0],i=t[t.length-1];return{top:n.offsetTop,bottom:i.offsetTop+i.offsetHeight}},highlightLines:function(e,t){var n=Plugin.deserializeHighlightSteps(t||e.getAttribute("data-line-numbers"));n.length&&n[0].forEach((function(t){var n=[];"number"==typeof t.end?n=[].slice.call(e.querySelectorAll("table tr:nth-child(n+"+t.start+"):nth-child(-n+"+t.end+")")):"number"==typeof t.start&&(n=[].slice.call(e.querySelectorAll("table tr:nth-child("+t.start+")"))),n.length&&(n.forEach((function(e){e.classList.add("highlight-line")})),e.classList.add("has-highlights"))}))},deserializeHighlightSteps:function(e){return(e=(e=e.replace(/\s/g,"")).split(Plugin.HIGHLIGHT_STEP_DELIMITER)).map((function(e){return e.split(Plugin.HIGHLIGHT_LINE_DELIMITER).map((function(e){if(/^[\d-]+$/.test(e)){e=e.split(Plugin.HIGHLIGHT_LINE_RANGE_DELIMITER);var t=parseInt(e[0],10),n=parseInt(e[1],10);return isNaN(n)?{start:t}:{start:t,end:n}}return{}}))}))},serializeHighlightSteps:function(e){return e.map((function(e){return e.map((function(e){return"number"==typeof e.end?e.start+Plugin.HIGHLIGHT_LINE_RANGE_DELIMITER+e.end:"number"==typeof e.start?e.start:""})).join(Plugin.HIGHLIGHT_LINE_DELIMITER)})).join(Plugin.HIGHLIGHT_STEP_DELIMITER)}};function betterTrim(e){function t(e){return e.replace(/^[\s\uFEFF\xA0]+/g,"")}return function(e){var n=function(e){for(var t=e.split("\n"),n=0;n<t.length&&""===t[n].trim();n++)t.splice(n--,1);for(n=t.length-1;n>=0&&""===t[n].trim();n--)t.splice(n,1);return t.join("\n")}(e.innerHTML),i=n.split("\n"),r=i.reduce((function(e,n){return n.length>0&&t(n).length>0&&e>n.length-t(n).length?n.length-t(n).length:e}),Number.POSITIVE_INFINITY);return i.map((function(e,t){return e.slice(r)})).join("\n")}(e)}export default()=>Plugin;